<% include layout/header %>

<div class="main">
  <% include layout/nav %>
  <div class="container-fluid">
    <div class="page-title">
      <h1>所有文章</h1>
      <a href="postAdd" class="btn btn-primary btn-xs">写文章</a>
    </div>
    <!-- 有错误信息时展示 -->
    <!-- <div class="alert alert-danger">
        <strong>错误！</strong>发生XXX错误
      </div> -->
    <div class="page-action">
      <!-- show when multiple checked -->
      <a class="btn btn-danger btn-sm" href="javascript:;" style="display: none">批量删除</a>
      <form class="form-inline">
        <select id="category" name="category" class="form-control input-sm">
          <option value="">所有分类</option>

        </select>
        <select name="" class="form-control input-sm">
          <option value="">所有状态</option>
          <option value="">草稿</option>
          <option value="">已发布</option>
        </select>
        <button class="btn btn-default btn-sm">筛选</button>
      </form>
      <ul class="pagination pagination-sm pull-right">
        <li><a href="#">上一页</a></li>
        <li><a href="#">1</a></li>
        <li><a href="#">2</a></li>
        <li><a href="#">3</a></li>
        <li><a href="#">下一页</a></li>
      </ul>
    </div>
    <table class="table table-striped table-bordered table-hover">
      <thead>
        <tr>
          <th class="text-center" width="40"><input type="checkbox"></th>
          <th>标题</th>
          <th>作者</th>
          <th>分类</th>
          <th class="text-center">发表时间</th>
          <th class="text-center">状态</th>
          <th class="text-center" width="100">操作</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td class="text-center"><input type="checkbox"></td>
          <td>随便一个名称</td>
          <td>小小</td>
          <td>潮科技</td>
          <td class="text-center">2016/10/07</td>
          <td class="text-center">已发布</td>
          <td class="text-center">
            <a href="javascript:;" class="btn btn-default btn-xs">编辑</a>
            <a href="javascript:;" class="btn btn-danger btn-xs">删除</a>
          </td>
        </tr>
        <tr>
          <td class="text-center"><input type="checkbox"></td>
          <td>随便一个名称</td>
          <td>小小</td>
          <td>潮科技</td>
          <td class="text-center">2016/10/07</td>
          <td class="text-center">已发布</td>
          <td class="text-center">
            <a href="javascript:;" class="btn btn-default btn-xs">编辑</a>
            <a href="javascript:;" class="btn btn-danger btn-xs">删除</a>
          </td>
        </tr>
        <tr>
          <td class="text-center"><input type="checkbox"></td>
          <td>随便一个名称</td>
          <td>小小</td>
          <td>潮科技</td>
          <td class="text-center">2016/10/07</td>
          <td class="text-center">已发布</td>
          <td class="text-center">
            <a href="javascript:;" class="btn btn-default btn-xs">编辑</a>
            <a href="javascript:;" class="btn btn-danger btn-xs">删除</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>
</div>

<% include layout/aside %>
<% include layout/footer %>
<script id="tmp" type="text/html">
  {{each data}}
  <option value="{{ $value.id }}">{{ $value.name }}</option>
  {{/each}}
</script>
<script>
  //页面打开动态渲染分类信息
  function getSelect() {
    //发送异步请求
    $.ajax({
      url: '/getAllData',
      type: 'GET',
      success: function (res) {
        let html = template('tmp', res)
        //添加到所属分类
        $('#category').append(html);
      }
    });
  };
  getSelect();
</script>